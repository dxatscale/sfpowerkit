name: Review-Smoke-Test
on:
  pull_request:
    branches: 
      - main
      - 'hotfix/*'
      
  workflow_dispatch:
      
jobs:
  SmokeTest:
      name: Smoke Test PR
      runs-on: 'ubuntu-latest'     
      
      steps:
        - uses: actions/checkout@v3
        - name: Setup Node.js environment
          uses: actions/setup-node@v3.3.0
          with:
            node-version: '14'
            registry-url: 'https://registry.npmjs.org'
            
        - name: Install SFDX
          run: npm install -g  sfdx-cli
          
        - name: Install sfpowerkit
          run: echo y | sfdx plugins:install sfpowerkit
          
        - name: Store Auth File
          run: echo "${{ secrets.DEVHUB_SFDX_AUTH_URL }}" > ./authfile 
        
        - name: Authenitcate to DevHub
          run: sfdx auth:sfdxurl:store -f authfile -a HubOrg
          
        
